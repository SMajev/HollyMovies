"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const chalk_1 = __importDefault(require("chalk"));
const update_check_1 = __importDefault(require("update-check"));
const gradient_string_1 = __importDefault(require("gradient-string"));
const updateCheck = async (pkg) => {
    try {
        const distTag = pkg.version.includes('beta') ? 'beta' : 'latest';
        const update = await (0, update_check_1.default)(pkg, { distTag });
        if (update) {
            process.on('exit', () => {
                console.log((0, gradient_string_1.default)('#f50', 'orange', 'red')(' ──────────────────────────────────────────────') +
                    '\n' +
                    (0, gradient_string_1.default)('#f50', 'orange', 'red')(`     Update available ${pkg.version} \u2192  ${update.latest}`) +
                    '\n' +
                    chalk_1.default.redBright('     Run ') +
                    chalk_1.default.cyanBright(`${process.pkg ? 'd-fi -U' : 'npm i -g d-fi@' + distTag}`) +
                    chalk_1.default.redBright(' to update') +
                    '\n' +
                    (0, gradient_string_1.default)('#f50', 'orange', 'red')(' ──────────────────────────────────────────────'));
            });
        }
        return update;
    }
    catch (err) { }
};
exports.default = updateCheck;
